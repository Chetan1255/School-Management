{% extends "accounts/superadmin/base_superadmin.html" %}
{% block content %}

<style>
.table-box {
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.search-box {
    margin-bottom: 15px;
}

.search-box input {
    padding: 8px 12px;
    width: 300px;
}

/* ğŸ”¥ IMPORTANT FIX */
table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;   /* ğŸ‘ˆ MAIN FIX */
}

th {
    background: #1e293b;
    color: #fff;
    padding: 10px;
    text-align: left;
}

td {
    padding: 10px;
    border-bottom: 1px solid #e5e7eb;
    word-wrap: break-word;     /* ğŸ‘ˆ text wrap */
    white-space: normal;       /* ğŸ‘ˆ allow multi-line */
}

/* ğŸ”¥ School name specific */
.school-name {
    max-width: 350px;
}

.btn-delete {
    background: #dc2626;
    color: white;
    padding: 6px 10px;
    border-radius: 6px;
    text-decoration: none;
    font-size: 13px;
}

.btn-delete:hover {
    background: #b91c1c;
}
</style>

<h2>ğŸ« School List</h2>

<div class="table-box">

    <!-- ğŸ” SEARCH -->
    <form method="get" class="search-box">
        <input type="text" name="q" placeholder="Search school / address / code"
               value="{{ query|default:'' }}">
        <button type="submit">Search</button>
    </form>

    <table>
        <tr>
            <th style="width:60px;">ID</th>
            <th style="width:35%;">School Name</th>
            <th style="width:25%;">Address</th>
            <th style="width:120px;">Code</th>
            <th style="width:100px;">Status</th>
            <th style="width:120px;">Action</th>
        </tr>

        {% for school in schools %}
        <tr>
            <td>{{ school.id }}</td>

            <!-- ğŸ”¥ TOOLTIP + WRAP -->
            <td class="school-name" title="{{ school.name }}">
                {{ school.name }}
            </td>

            <td title="{{ school.address }}">
                {{ school.address|default:"â€”" }}
            </td>

            <td>{{ school.code }}</td>

            <td>
                {% if school.is_active %}
                    âœ… Active
                {% else %}
                    âŒ Inactive
                {% endif %}
            </td>

            <td>
                <a href="{% url 'delete_school' school.id %}"
                   onclick="return confirm('Are you sure you want to delete this school?')"
                   class="btn-delete">
                   ğŸ—‘ Delete
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" style="text-align:center;">No schools found</td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}
