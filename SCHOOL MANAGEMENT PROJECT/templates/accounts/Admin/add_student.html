{% extends "accounts/base_admin.html" %}
{% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<style>
.required::after { content:" *"; color:red; font-weight:bold; }
.card {
  background:#fff; padding:25px; max-width:950px;
  border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,0.08); margin:auto;
}
.form-row { display:flex; gap:16px; margin-bottom:15px; }
.form-group { flex:1; }
label { font-weight:600; margin-bottom:6px; display:block; }
input, select, textarea {
  width:100%; padding:10px; border-radius:6px; border:1px solid #ccc;
}
textarea { min-height:80px; }
.btn-primary { background:#2563eb; color:#fff; padding:12px 18px; border-radius:8px; }
.btn-success { background:#16a34a; color:#fff; padding:12px 18px; border-radius:8px; }
@media(max-width:768px){ .form-row{flex-direction:column;} }
</style>

<!-- ================= CLASS STEP ================= -->
<div class="card" id="classCard">
  <h3>‚ûï Add Student</h3>

  <div class="form-group">
    <label class="required">Select Class</label>
    <select id="classSelect">
      <option value="">-- Select Class --</option>
      <option value="5">5th</option><option value="6">6th</option>
      <option value="7">7th</option><option value="8">8th</option>
      <option value="9">9th</option><option value="10">10th</option>
    </select>
  </div>

  <button type="button" class="btn-primary" onclick="showForm()">Next</button>
</div>

<!-- ================= STUDENT FORM ================= -->
<div class="card" id="studentCard" style="display:none">
<form method="post">
{% csrf_token %}

<h3>üë®‚Äçüéì Student Details</h3>

<div class="form-row">
  <div class="form-group">
    <label class="required">Register No</label>
    <input type="text" name="register_no" required>
  </div>

  <div class="form-group">
    <label class="required">Student ID</label>
    <input type="text" name="student_id" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label class="required">Aadhaar</label>
    <input type="text" name="aadhaar" maxlength="12" required>
  </div>
  <div class="form-group">
    <label class="required">First Name</label>
    <input type="text" name="first_name" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label class="required">Father Name</label>
    <input type="text" name="father_name" required>
  </div>
  <div class="form-group">
    <label class="required">Mother Name</label>
    <input type="text" name="mother_name" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label class="required">Surname</label>
    <input type="text" name="surname" required>
  </div>
  <div class="form-group">
    <label class="required">Religion</label>
    <input type="text" name="religion" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label class="required">Caste</label>
    <input type="text" name="caste" required>
  </div>
  <div class="form-group">
    <label class="required">Place of Birth</label>
    <input type="text" name="birth_place" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label class="required">Taluka</label>
    <input type="text" name="taluka" required>
  </div>
  <div class="form-group">
    <label class="required">District</label>
    <input type="text" name="district" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label class="required">Date of Birth</label>
    <input type="text" name="dob" id="dob" required>
  </div>
  <div class="form-group">
    <label class="required">Admission Date</label>
    <input type="text" name="admission_date" id="admission_date" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label>Date of Leaving School</label>
    <input type="text" name="leaving_date" id="leaving_date" required>
  </div>
  <div class="form-group">
    <label>Last School STD</label>
    <input type="text" name="last_std" required>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label>Last School Attended</label>
    <input type="text" name="last_school" required>
  </div>
  <div class="form-group">
    <label class="required">Admission STD</label>
    <input type="text" name="admission_std" id="admissionStd" required>
  </div>
</div>

<div class="form-group">
  <label>School</label>
    <input type="text" name="school" value="üè´ {{ current_school.name }}" readonly>
</div>

<div class="form-group">
  <label>Remark</label>
  <textarea name="remark" required></textarea>
</div>

<button type="submit" class="btn-success">‚ûï Add Student</button>
</form>
</div>

<script>
function showForm(){
  const cls = document.getElementById("classSelect").value;
  if(!cls){ alert("Select class"); return; }
  document.getElementById("admissionStd").value = cls;
  classCard.style.display="none";
  studentCard.style.display="block";
}
flatpickr("#dob",{dateFormat:"Y-m-d"});
flatpickr("#admission_date",{dateFormat:"Y-m-d"});
flatpickr("#leaving_date",{dateFormat:"Y-m-d"});
</script>

{% endblock %}