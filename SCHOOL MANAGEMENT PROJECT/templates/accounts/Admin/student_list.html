{% extends "accounts/base_admin.html" %}
{% block content %}


<style>
table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
    text-align: left;
}

th {
    background: #f9fafb;
    font-weight: 600;
}

.badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
}

.badge-admin { background: #e0f2fe; color: #0369a1; }
.badge-teacher { background: #dcfce7; color: #166534; }
.badge-clerk { background: #fef3c7; color: #92400e; }
.badge-super { background: #fee2e2; color: #991b1b; }

.action-btn {
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 14px;
    text-decoration: none;
    margin-right: 5px;
}

.edit { background: #2563eb; color: #fff; }
.delete { background: #dc2626; color: #fff; }

.form-control {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
}

</style>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">


<div class="container mt-4">
    <h2>ðŸŽ“ Student Management</h2>

    <form method="get" class="row g-2 mb-3">
        <div class="col-md-3">
            <input type="text" name="q" class="form-control" placeholder="Search Name / GRN"value="{{ search }}">
        </div>

        <div class="col-md-3">
            <select name="std" class="form-select">
                <option value="">All Classes</option>
                <option value="5" {% if std == "5" %}selected{% endif %}>5th</option>
                <option value="6" {% if std == "6" %}selected{% endif %}>6th</option>
                <option value="7" {% if std == "7" %}selected{% endif %}>7th</option>
            </select>
        </div>

        <div class="col-md-3 d-flex gap-2">
                <button class="btn btn-primary w-50" type="submit">Search</button>
                <a href="{% url 'student_list' %}" class="btn btn-secondary w-50">Reset</a>
        </div>
    </form>

    <div style="margin-bottom:10px; font-weight:bold;">
        {% if std and std != "all" %}
            Class {{ std }} - Total Students: {{ student_count }}
        {% else %}
            All Classes - Total Students: {{ student_count }}
        {% endif %}
    </div>


    <table class="table table-bordered table-striped">
    <thead class="table-dark">
    <tr>
        <th>Full Name</th>
        <th>GRN</th>
        <th>Class</th>
        <th>Aadhaar</th>
        <th>Student ID</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    {% for s in students %}
    <tr>
        <td>{{ s.first_name }} {{ s.surname }}</td>
        <td>{{ s.register_no }}</td>
        <td>{{ s.admission_std }}</td>
        <td>{{ s.aadhaar }}</td>
        <td>{{ s.student_id }}</td>
        <td>
            <a href="{% url 'student_edit' s.id %}" class="action-btn edit">Edit</a>
            <a href="{% url 'student_delete' s.id %}"class="action-btn delete"onclick="return confirm('Delete student?')">Delete</a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="6" class="empty" style="text-align:center;">
            No students found
        </td>
    </tr>
    {% endfor %}
</tbody>

</table>

</div>
{% endblock %}